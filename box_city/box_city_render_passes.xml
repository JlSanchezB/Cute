<Root>
<Global>
</Global>
<Passes>
  <Pass name="SyncStaticGPUMemory">
    <Dependencies>
      <Resource name="StaticGPUMemoryBuffer" pre_condition_state="Init" post_update_state="Ready" access="UnorderedAccess"/>
    </Dependencies>
    <Commands>
      <SyncStaticGPUMemoryPass/>
    </Commands>
  </Pass>
  <Pass name="Main_Culling">
    <Dependencies>
      <Resource name="IndirectBoxBuffer" pre_condition_state="Init" post_update_state="Ready" access="UnorderedAccess"/>
      <Resource name="IndirectParametersBuffer" pre_condition_state="Init" post_update_state="Ready" access="UnorderedAccess"/>
      <Resource name="StaticGPUMemoryBuffer" pre_condition_state="Ready" access="AllShaderResource"/>
    </Dependencies>
    <Commands>
      <CullCityBoxes/>
    </Commands>
  </Pass>
  <Pass name="Main_Render">
    <Dependencies>
      <Resource name="IndirectBoxBuffer" pre_condition_state="Ready" access="AllShaderResource"/>
      <Resource name="IndirectParametersBuffer" pre_condition_state="Ready" access="IndirectArgument"/>
      <Resource name="StaticGPUMemoryBuffer" pre_condition_state="Ready" access="AllShaderResource"/>
      <DepthBuffer name="SceneDepth" pre_condition_state="Alloc" post_update_state="Free" access="Depth" format="D32_FLOAT" default_depth="0.f"/>
      <Resource name="BackBuffer" access="RenderTarget"/>
    </Dependencies>
    <Commands>
      <SetRenderTarget>
		    <RenderTarget>BackBuffer</RenderTarget>
        <DepthBuffer>SceneDepth</DepthBuffer>
	    </SetRenderTarget>
	    <ClearRenderTarget colour="0,0,0,0">BackBuffer</ClearRenderTarget>
      <ClearDepthStencil>SceneDepth</ClearDepthStencil>
      <DrawCityBoxes/>
      <DrawCityBoxItems priority="Box"/>
    </Commands>
  </Pass>
</Passes>
</Root>
